version: '3.8'

services:
  scraper:
    build: .
    container_name: ml-scraper
    volumes:
      # Persistir screenshots no host
      - ./screenshots:/app/screenshots
      # Persistir CSV de produtos no host
      - ./produtos.csv:/app/produtos.csv
    command: python -m scripts.run_scraper_ml
    # Restart autom√°tico em caso de falha
    restart: unless-stopped
    
  # rodar testes
  tests:
    build: .
    container_name: ml-scraper-tests
    volumes:
      - .:/app
    command: pytest tests/ -v
    profiles:
      - test
